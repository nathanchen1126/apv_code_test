# 角色设定
- 你是一名经验丰富的python和地理信息工程师，专长是使用python，按照要求绘制地图，以符合最顶尖学术期刊的地图出版要求。
- 指定使用 geopandas 处理数据，matplotlib 绘图，cartopy 处理投影（这是学术地图的关键），以及 seaborn 处理配色
# 任务流程
## 主要任务
- 绘制一幅2*2的地图。
- 这副地图展示了中国的农业光伏分类的结果。
- 地图包括四个子图：1.图1左上角，分气候区的农业光伏shp数据。2.图2右上角，分省的农业光伏shp数据。3.图3左下角，农业光伏的核密度图。4.图4右下角，农业光伏的标准差椭圆图。
## 数据来源
- 农业光伏分类数据，保存在"D:\pv\result\result_postprocess"文件夹下，有七个shp文件，他们分别是不同气候区的农业光伏数据，他们可以拼合成一个完整的气候区图片。
- 气候区矢量地图，保存在"D:\pv\data\Chinese_climate\Chinese_climate.shp"
- 省级地图，国家级地图，保存在"D:\矢量地图\2023行政区划"
## 总体要求
- 首先为我统一坐标系
- 每一副子图都需要绘制南海诸岛小图，整体布局可以参考代码"D:\pv\code\绘图参考2.py"中的布局方式。封装一个 add_south_china_sea_inset(ax) 函数，可以复用
- 绘制的图片，保存在"D:\pv\plot"文件夹下。
- 四幅图之间保留0.125的间距。每幅子图宽度为6cm，高度为5.5cm
- 图中字体全部使用Arial 字体
- 每一副图在相同位置加入指北针和相同大小的比例尺
## 图1 分气候区图
- 绘制分气候区图像，各气候区使用较淡的颜色映射，用英文标注气候区
- 绘制光伏图像，采用红色边框，透明内部的方式，绘制光伏的shp面
- 插入图例，显示光伏面
## 图2 分省图
- 将光伏shp映射到各省份，计算各个省份对应的光伏shp面积，对应分为五档，颜色映射为从honey到dark blue
- 各省使用较淡的颜色映射，用英文标注省
- 插入图例，显示不同的光伏面积数量
## 图3 核密度图
- 计算光伏面积的核密度，绘制到地图上
- 图例为连续颜色映射，颜色从低到高为深蓝到深红
## 图4 标准差椭圆图
- 请在代码中实现标准差椭圆的计算函数（计算中心点、长轴、短轴、旋转角度）。基于光伏图斑的质心进行计算。
- 绘制标准差椭圆图，反映光伏的布局特征，绘制 1倍标准差椭圆。
- 底图使用分省底图，省界用灰色虚线
# 代码要求
- 模块化：请将“数据读取与预处理”、“SDE/KDE计算”、“绘图配置”分装在不同函数中。
- 容错性：在涉及字段名的地方添加中文注释，提示我如果报错需要检查 shp 文件的属性表。
- 完整性：代码不需要伪代码，要是能直接运行的完整脚本。
- 可调整：把所有的绘图参数，都放在代码开始的地方，让我能够调整图中字号等参数。
# 输出
- 输出为png格式，分辨率为600dpi
- 输出文件名为"D:\pv\plot\pv_map.png"
- 颜色等参考D:\pv\code\绘图参考1.ipynb

